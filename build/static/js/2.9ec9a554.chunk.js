(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1816:function(t,e,a){"use strict";a.r(e);var n=a(7),r=a(8),c=a(13),o=a(12),s=a(14),l=a(0),i=a.n(l),u=a(40),p=a(10),d=a(22),m=a(284),f=a(23),C=a(171),g=a(6),h=a(1),b=a(491),E=a(42),O=a.n(E),T="[CONTACTS APP] GET USER DATA";function y(){var t=O.a.get("/api/contacts-app/user");return function(e){return t.then(function(t){return e({type:T,payload:t.data})})}}var A=a(64),v="[CONTACTS APP] GET CONTACTS",S="[CONTACTS APP] SET SEARCH TEXT",P="[CONTACTS APP] TOGGLE IN SELECTED CONTACTS",N="[CONTACTS APP] SELECT ALL CONTACTS",D="[CONTACTS APP] DESELECT ALL CONTACTS",j="[CONTACTS APP] OPEN NEW CONTACT DIALOG",I="[CONTACTS APP] CLOSE NEW CONTACT DIALOG",w="[CONTACTS APP] OPEN EDIT CONTACT DIALOG",x="[CONTACTS APP] CLOSE EDIT CONTACT DIALOG",k="[CONTACTS APP] ADD CONTACT",M="[CONTACTS APP] UPDATE CONTACT",L="[CONTACTS APP] REMOVE CONTACTS",G="[CONTACTS APP] TOGGLE STARRED CONTACT",R="[CONTACTS APP] TOGGLE STARRED CONTACTS",F="[CONTACTS APP] SET CONTACTS STARRED ",U="[CONTACTS APP] OPEN CONFIRM DIALOG",_="[CONTACTS APP] CLOSE CONFIRM DIALOG";function H(t){var e=O.a.get(A.a.baseUrl+"/admin/users/"+t+"/");return function(t){return e.then(function(e){t({type:v,payload:e.data.floorplans})})}}function W(t){return{type:P,contactId:t}}function J(){return{type:N}}function q(){return{type:D}}function z(){return{type:j}}function B(){return{type:I}}function Y(t){return console.log("====================>"+t),{type:U,data:t}}function K(){return{type:_}}function V(t){return{type:w,data:t}}function X(){return{type:x}}function Q(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/add-contact",{newContact:t}).then(function(t){return Promise.all([e({type:k})]).then(function(){return e(H(n))})})}}function Z(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/update-contact",{contact:t}).then(function(t){return Promise.all([e({type:M})]).then(function(){return e(H(n))})})}}function $(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/remove-contacts",{contactIds:t}).then(function(t){return Promise.all([e({type:L}),e({type:D})]).then(function(){return e(H(n))})})}}function tt(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/toggle-starred-contact",{contactId:t}).then(function(t){return Promise.all([e({type:G}),e(y())]).then(function(){return e(H(n))})})}}function et(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/toggle-starred-contacts",{contactIds:t}).then(function(t){return Promise.all([e({type:R}),e({type:D}),e(y())]).then(function(){return e(H(n))})})}}function at(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/set-contacts-starred",{contactIds:t}).then(function(t){return Promise.all([e({type:F}),e({type:D}),e(y())]).then(function(){return e(H(n))})})}}function nt(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/set-contacts-unstarred",{contactIds:t}).then(function(t){return Promise.all([e({type:F}),e({type:D}),e(y())]).then(function(){return e(H(n))})})}}var rt=a(1740),ct=a(65),ot=a.n(ct),st=a(249),lt=a.n(st),it=a(250),ut=a.n(it),pt=a(251),dt=a.n(pt),mt=a(253),ft=a.n(mt),Ct=a(252),gt=a.n(Ct),ht=function(t){function e(){var t,a;Object(n.a)(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(s)))).state={open:!1},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.removeContact=function(t){var e=localStorage.getItem("item_id");console.log(t),O.a.delete(A.a.baseUrl+"/admin/users/"+e+"/floorplans/"+t+"/").then(function(t){return a.ReturnMainPage()})},a.ReturnMainPage=function(){var t=a.props,e=t.history,n=t.page;e.push({pathname:"/app/pages/profile",page:n}),a.props.closeConfirmDialog()},a}return Object(s.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.closeConfirmDialog,n=e.confirmDialog;return i.a.createElement(lt.a,{open:n.props.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(gt.a,{id:"alert-dialog-title"},"Permanently delete?"),i.a.createElement(dt.a,null,i.a.createElement(ft.a,{id:"alert-dialog-description"},"Please note that it will delete all the user data.")),i.a.createElement(ut.a,null,i.a.createElement(ot.a,{onClick:function(){t.removeContact(n.user_id)},color:"primary"},"Agree"),i.a.createElement(ot.a,{onClick:function(){a()},color:"primary",autoFocus:!0},"Disagree")))}}]),e}(i.a.Component);var bt=Object(f.b)(function(t){var e=t.floorplansApp;return{confirmDialog:e.contacts.confirmDialog,page:e.contacts.page}},function(t){return Object(d.c)({closeEditContactDialog:X,closeNewContactDialog:B,addContact:Q,updateContact:Z,closeConfirmDialog:K},t)})(ht),Et=function(t){function e(){var t,a;Object(n.a)(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(s)))).state={selectedContactsMenu:null},a.getFilteredArray=function(t,e){var a=Object.keys(t).map(function(e){return t[e]});return 0===e.length?a:p.t.filterArrayByString(a,e)},a.openSelectedContactMenu=function(t){a.setState({selectedContactsMenu:t.currentTarget})},a.closeSelectedContactsMenu=function(){a.setState({selectedContactsMenu:null})},a.dateFormat=function(t){var e=new Date(t);return e=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+(e.getHours()>12?e.getHours()-12:e.getHours())+":"+e.getMinutes()+" "+(e.getHours()>=12?"PM":"AM"),i.a.createElement("div",null,e)},a}return Object(s.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.contacts,n=e.searchText,r=e.selectedContactIds,c=e.openEditContactDialog,o=e.removeContacts,s=e.confirmDialog,l=(e.removeContact,e.setContactsUnstarred),u=e.setContactsStarred,d=this.getFilteredArray(a,n),m=this.state.selectedContactsMenu;return d||0!==d.length?i.a.createElement(p.b,{animation:"transition.slideUpIn",delay:300},i.a.createElement(b.b,{className:"-striped -highlight border-0",getTrProps:function(t,e,a){return{className:"cursor-pointer",onClick:function(t,a){e&&c(e.original)}}},data:d,columns:[{Header:"No",accessor:"",Cell:function(t){return t.index+1},width:64,filterable:!1,className:"justify-center"},{Header:function(){return r.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(h.y,{"aria-owns":m?"selectedContactsMenu":null,"aria-haspopup":"true",onClick:t.openSelectedContactMenu},i.a.createElement(h.x,null,"more_horiz")),i.a.createElement(h.I,{id:"selectedContactsMenu",anchorEl:m,open:Boolean(m),onClose:t.closeSelectedContactsMenu},i.a.createElement(h.K,null,i.a.createElement(h.J,{onClick:function(){o(r),t.closeSelectedContactsMenu()}},i.a.createElement(h.F,null,i.a.createElement(h.x,null,"delete")),i.a.createElement(h.G,{inset:!0,primary:"Remove"})),i.a.createElement(h.J,{onClick:function(){u(r),t.closeSelectedContactsMenu()}},i.a.createElement(h.F,null,i.a.createElement(h.x,null,"star")),i.a.createElement(h.G,{inset:!0,primary:"Starred"})),i.a.createElement(h.J,{onClick:function(){l(r),t.closeSelectedContactsMenu()}},i.a.createElement(h.F,null,i.a.createElement(h.x,null,"star_border")),i.a.createElement(h.G,{inset:!0,primary:"Unstarred"})))))},accessor:"thumbnail",Cell:function(t){return i.a.createElement(h.b,{className:"mr-8",alt:t.original.name,src:t.value,style:{borderRadius:0}})},className:"justify-center",width:64,sortable:!1},{Header:"Name",accessor:"name",filterable:!1},{Header:"Created at",accessor:"created_at",filterable:!1,Cell:function(e){return t.dateFormat(e.value)}},{Header:"Tags",accessor:"tags",Cell:function(t){return i.a.createElement(rt.a,{data:t.value,isEdit:!1})},filterable:!1,sortable:!1},{Header:"",width:64,className:"justify-center",Cell:function(t){return i.a.createElement("div",{className:"flex items-center"},i.a.createElement(h.y,{onClick:function(e){e.stopPropagation(),s(t.original.id)}},i.a.createElement(h.x,null,"delete")))}}],defaultPageSize:10,noDataText:"No contacts found"})):i.a.createElement("div",{className:"flex items-center justify-center h-full"},i.a.createElement(h.bb,{color:"textSecondary",variant:"h5"},"There are no contacts!"))}}]),e}(l.Component);var Ot=Object(m.g)(Object(f.b)(function(t){var e=t.floorplansApp;return{contacts:e.contacts.entities,selectedContactIds:e.contacts.selectedContactIds,searchText:e.contacts.searchText,user:e.user}},function(t){return Object(d.c)({getContacts:H,getUserData:y,toggleInSelectedContacts:W,selectAllContacts:J,deSelectAllContacts:q,openEditContactDialog:V,removeContacts:$,toggleStarredContact:tt,toggleStarredContacts:et,setContactsStarred:at,setContactsUnstarred:nt,confirmDialog:Y},t)})(Et)),Tt=a(16),yt={id:"",name:"",lastName:"",avatar:"assets/images/avatars/profile.jpg",nickname:"",company:"",jobTitle:"",email:"",phone:"",address:"",birthday:"",notes:""},At=function(t){function e(){var t,a;Object(n.a)(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(s)))).state=Object(Tt.a)({},yt,{disableEdit:!0}),a.handleChange=function(t){a.setState(g.a.set(Object(Tt.a)({},a.state),t.target.name,"checkbox"===t.target.type?t.target.checked:t.target.value))},a.closeComposeDialog=function(){"edit"===a.props.contactDialog.type?a.props.closeEditContactDialog():a.props.closeNewContactDialog()},a.edit=function(){a.setState({disableEdit:!1})},a}return Object(s.a)(e,t),Object(r.a)(e,[{key:"componentDidUpdate",value:function(t,e,a){!t.contactDialog.props.open&&this.props.contactDialog.props.open&&("edit"===this.props.contactDialog.type&&this.props.contactDialog.data&&!g.a.isEqual(this.props.contactDialog.data,e)&&this.setState(Object(Tt.a)({},this.props.contactDialog.data,{disableEdit:!0})),"new"!==this.props.contactDialog.type||g.a.isEqual(yt,e)||this.setState(Object(Tt.a)({},yt)))}},{key:"canBeSubmitted",value:function(){return this.state.name.length>0}},{key:"render",value:function(){var t=this.props,e=t.contactDialog;t.addContact;return i.a.createElement(h.k,Object.assign({classes:{paper:"m-24"}},e.props,{onClose:this.closeComposeDialog,fullWidth:!0,maxWidth:"xs"}),i.a.createElement(h.a,{position:"static",elevation:1},i.a.createElement("div",{className:"flex flex-col items-center justify-center pb-20 pt-16"},"edit"===e.type&&i.a.createElement(h.bb,{variant:"h6",color:"inherit",className:"pt-8"},this.state.name))),i.a.createElement(h.m,{classes:{root:"p-24"}},i.a.createElement("div",{className:"flex"},i.a.createElement(h.Y,{disabled:this.state.disableEdit,className:"mb-16",label:"Name",autoFocus:!0,id:"name",name:"name",value:this.state.name,variant:"outlined",required:!0,fullWidth:!0})),i.a.createElement("div",{className:"flex mb-24"},i.a.createElement("fieldset",{style:{border:"1px solid #c4c4c4",borderRadius:4,width:312}},i.a.createElement("legend",{style:{color:"#757575",marginLeft:10,fontSize:12}},"Tags"),i.a.createElement("div",null,i.a.createElement(rt.a,{data:this.state.tags,isEdit:!1})))),i.a.createElement("div",{className:"flex"},i.a.createElement(h.Y,{disabled:this.state.disableEdit,className:"mb-24",label:"Created by",id:"created_by",name:"created_by",value:this.state.id,variant:"outlined",fullWidth:!0})),i.a.createElement("div",{className:"flex"},i.a.createElement(h.Y,{disabled:this.state.disableEdit,className:"mb-24",label:"Location",id:"address",name:"address",value:"this.state.location",variant:"outlined",fullWidth:!0}))))}}]),e}(l.Component);var vt=Object(f.b)(function(t){return{contactDialog:t.floorplansApp.contacts.contactDialog}},function(t){return Object(d.c)({closeEditContactDialog:X,closeNewContactDialog:B,addContact:Q,updateContact:Z},t)})(At),St=a(24),Pt={entities:[],page:{},totalPage:"",searchText:"",selectedContactIds:[],routeParams:{},contactDialog:{type:"new",props:{open:!1},data:null},confirmDialog:{props:{open:!1},user_id:null}},Nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return Object(Tt.a)({},t,{entities:e.payload,routeParams:e.routeParams,page:e.params,totalPage:e.totalPage});case S:return Object(Tt.a)({},t,{searchText:e.searchText});case P:var a=e.contactId,n=Object(St.a)(t.selectedContactIds);return n=void 0!==n.find(function(t){return t===a})?n.filter(function(t){return t!==a}):Object(St.a)(n).concat([a]),Object(Tt.a)({},t,{selectedContactIds:n});case N:var r=Object.keys(t.entities).map(function(e){return t.entities[e]}).map(function(t){return t.id});return Object(Tt.a)({},t,{selectedContactIds:r});case D:return Object(Tt.a)({},t,{selectedContactIds:[]});case j:return Object(Tt.a)({},t,{contactDialog:{type:"new",props:{open:!0},data:null}});case I:return Object(Tt.a)({},t,{contactDialog:{type:"new",props:{open:!1},data:null}});case w:return Object(Tt.a)({},t,{contactDialog:{type:"edit",props:{open:!0},data:e.data}});case x:return Object(Tt.a)({},t,{contactDialog:{type:"edit",props:{open:!1},data:null}});case U:return Object(Tt.a)({},t,{confirmDialog:{props:{open:!0},user_id:e.data}});case _:return Object(Tt.a)({},t,{confirmDialog:{props:{open:!1},user_id:null}});default:return t}},Dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case T:return e.payload;default:return t}},jt=Object(d.d)({contacts:Nt,user:Dt}),It=function(t){function e(){return Object(n.a)(this,e),Object(c.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("item_id");this.props.getContacts(t),this.props.getUserData()}},{key:"componentDidUpdate",value:function(t,e){if(!g.a.isEqual(this.props.location,t.location)){var a=localStorage.getItem("item_id");this.props.getContacts(a)}}},{key:"render",value:function(){var t=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.m,{classes:{contentCardWrapper:"p-16 sm:p-24 pb-80",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},content:i.a.createElement(Ot,null),sidebarInner:!0,onRef:function(e){t.pageLayout=e},innerScroll:!0}),i.a.createElement(vt,null),i.a.createElement(bt,{history:this.props.history}))}}]),e}(l.Component);e.default=Object(C.a)("floorplansApp",jt)(Object(u.withStyles)(function(t){return{addButton:{position:"absolute",right:12,bottom:12,zIndex:99}}},{withTheme:!0})(Object(m.g)(Object(f.b)(function(t){var e=t.floorplansApp;return{contacts:e.contacts.entities,selectedContactIds:e.contacts.selectedContactIds,searchText:e.contacts.searchText,user:e.user}},function(t){return Object(d.c)({getContacts:H,getUserData:y,openNewContactDialog:z},t)})(It))))}}]);