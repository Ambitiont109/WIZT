(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1739:function(t,e,a){"use strict";var n=a(24),c=a(7),r=a(8),o=a(13),l=a(12),s=a(14),i=a(0),u=a.n(i),p=a(43),d=a(493),m=a.n(d),f=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(o.a)(this,Object(l.a)(e).call(this,t))).state={chipData:[{key:0,label:"Angular"},{key:1,label:"jQuery"},{key:2,label:"Polymer"}]},a.handleDelete=function(t){return function(){"React"!==t.label?a.setState(function(e){var a=Object(n.a)(e.chipData),c=a.indexOf(t);return a.splice(c,1),{chipData:a}}):alert("Why would you want to delete React?! :)")}},a}return Object(s.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.classes,n=e.data,c=e.isEdit;if(void 0===n)var r=[];else r=n.split(",");return u.a.createElement("div",{className:a.root},r.map(function(e,n){return c?u.a.createElement(m.a,{key:n,icon:null,label:e,style:{height:20},onDelete:t.handleDelete(r),className:a.chip,clickable:!0}):u.a.createElement(m.a,{key:n,icon:null,label:e,style:{height:20},className:a.chip,clickable:!1})}))}}]),e}(u.a.Component);e.a=Object(p.withStyles)(function(t){return{root:{display:"flex",flexWrap:"wrap",padding:t.spacing.unit/2},chip:{margin:t.spacing.unit/2}}})(f)},741:function(t,e,a){"use strict";a.r(e);var n=a(7),c=a(8),r=a(13),o=a(12),l=a(14),s=a(0),i=a.n(s),u=a(43),p=a(10),d=a(22),m=a(93),f=a(23),C=a(172),h=a(6),g=a(1),b=a(491),E=a(38),O=a.n(E),y="[CONTACTS APP] GET USER DATA";function T(){var t=O.a.get("/api/contacts-app/user");return function(e){return t.then(function(t){return e({type:y,payload:t.data})})}}var v=a(64),A="[CONTACTS APP] GET CONTACTS",S="[CONTACTS APP] SET SEARCH TEXT",D="[CONTACTS APP] TOGGLE IN SELECTED CONTACTS",j="[CONTACTS APP] SELECT ALL CONTACTS",N="[CONTACTS APP] DESELECT ALL CONTACTS",P="[CONTACTS APP] OPEN NEW CONTACT DIALOG",w="[CONTACTS APP] CLOSE NEW CONTACT DIALOG",I="[CONTACTS APP] OPEN EDIT CONTACT DIALOG",k="[CONTACTS APP] CLOSE EDIT CONTACT DIALOG",x="[CONTACTS APP] ADD CONTACT",M="[CONTACTS APP] UPDATE CONTACT",L="[CONTACTS APP] REMOVE CONTACTS",R="[CONTACTS APP] TOGGLE STARRED CONTACT",F="[CONTACTS APP] TOGGLE STARRED CONTACTS",G="[CONTACTS APP] SET CONTACTS STARRED ",U="[CONTACTS APP] OPEN CONFIRM DIALOG",H="[CONTACTS APP] CLOSE CONFIRM DIALOG";function _(t){var e=O.a.get(v.a.baseUrl+"/admin/users/"+t+"/");return function(t){return e.then(function(e){t({type:A,payload:e.data.floorplans})})}}function W(t){return{type:D,contactId:t}}function q(){return{type:j}}function z(){return{type:N}}function B(){return{type:P}}function X(){return{type:w}}function J(t){return{type:U,data:t}}function Q(){return{type:H}}function V(t){return{type:I,data:t}}function Y(){return{type:k}}function K(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/add-contact",{newContact:t}).then(function(t){return Promise.all([e({type:x})]).then(function(){return e(_(n))})})}}function Z(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/update-contact",{contact:t}).then(function(t){return Promise.all([e({type:M})]).then(function(){return e(_(n))})})}}function $(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/remove-contacts",{contactIds:t}).then(function(t){return Promise.all([e({type:L}),e({type:N})]).then(function(){return e(_(n))})})}}function tt(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/toggle-starred-contact",{contactId:t}).then(function(t){return Promise.all([e({type:R}),e(T())]).then(function(){return e(_(n))})})}}function et(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/toggle-starred-contacts",{contactIds:t}).then(function(t){return Promise.all([e({type:F}),e({type:N}),e(T())]).then(function(){return e(_(n))})})}}function at(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/set-contacts-starred",{contactIds:t}).then(function(t){return Promise.all([e({type:G}),e({type:N}),e(T())]).then(function(){return e(_(n))})})}}function nt(t){return function(e,a){var n=a().contactsApp.contacts.routeParams;return O.a.post("/api/contacts-app/set-contacts-unstarred",{contactIds:t}).then(function(t){return Promise.all([e({type:G}),e({type:N}),e(T())]).then(function(){return e(_(n))})})}}var ct=a(1739),rt=a(65),ot=a.n(rt),lt=a(249),st=a.n(lt),it=a(250),ut=a.n(it),pt=a(251),dt=a.n(pt),mt=a(253),ft=a.n(mt),Ct=a(252),ht=a.n(Ct),gt=function(t){function e(){var t,a;Object(n.a)(this,e);for(var c=arguments.length,l=new Array(c),s=0;s<c;s++)l[s]=arguments[s];return(a=Object(r.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(l)))).state={open:!1},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.removeContact=function(t){var e=localStorage.getItem("item_id");O.a.delete(v.a.baseUrl+"/admin/users/"+e+"/floorplans/"+t+"/").then(function(t){return a.ReturnMainPage()})},a.ReturnMainPage=function(){var t=a.props,e=t.history,n=t.page;e.push({pathname:"/app/pages/profile",page:n}),a.props.closeConfirmDialog()},a}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.closeConfirmDialog,n=e.confirmDialog;return i.a.createElement(st.a,{open:n.props.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(ht.a,{id:"alert-dialog-title"},"Permanently delete?"),i.a.createElement(dt.a,null,i.a.createElement(ft.a,{id:"alert-dialog-description"},"Please note that it will delete all the user data.")),i.a.createElement(ut.a,null,i.a.createElement(ot.a,{onClick:function(){t.removeContact(n.user_id)},color:"primary"},"Agree"),i.a.createElement(ot.a,{onClick:function(){a()},color:"primary",autoFocus:!0},"Disagree")))}}]),e}(i.a.Component);var bt=Object(f.b)(function(t){var e=t.floorplansApp;return{confirmDialog:e.contacts.confirmDialog,page:e.contacts.page}},function(t){return Object(d.c)({closeEditContactDialog:Y,closeNewContactDialog:X,addContact:K,updateContact:Z,closeConfirmDialog:Q},t)})(gt),Et=function(t){function e(){var t,a;Object(n.a)(this,e);for(var c=arguments.length,l=new Array(c),s=0;s<c;s++)l[s]=arguments[s];return(a=Object(r.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(l)))).state={selectedContactsMenu:null},a.getFilteredArray=function(t,e){var a=Object.keys(t).map(function(e){return t[e]});return 0===e.length?a:p.t.filterArrayByString(a,e)},a.openSelectedContactMenu=function(t){a.setState({selectedContactsMenu:t.currentTarget})},a.closeSelectedContactsMenu=function(){a.setState({selectedContactsMenu:null})},a.dateFormat=function(t){var e=new Date(t);return e=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+(e.getHours()>12?e.getHours()-12:e.getHours())+":"+e.getMinutes()+" "+(e.getHours()>=12?"PM":"AM"),i.a.createElement("div",null,e)},a}return Object(l.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.contacts,n=e.searchText,c=e.selectedContactIds,r=e.openEditContactDialog,o=e.removeContacts,l=e.confirmDialog,s=(e.removeContact,e.setContactsUnstarred),u=e.setContactsStarred,d=this.getFilteredArray(a,n),m=this.state.selectedContactsMenu;return d||0!==d.length?i.a.createElement(p.b,{animation:"transition.slideUpIn",delay:300},i.a.createElement(b.b,{className:"-striped -highlight border-0",getTrProps:function(t,e,a){return{className:"cursor-pointer",onClick:function(t,a){e&&r(e.original)}}},data:d,columns:[{Header:"No",accessor:"",Cell:function(t){return t.index+1},width:64,filterable:!1,className:"justify-center"},{Header:function(){return c.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(g.x,{"aria-owns":m?"selectedContactsMenu":null,"aria-haspopup":"true",onClick:t.openSelectedContactMenu},i.a.createElement(g.w,null,"more_horiz")),i.a.createElement(g.H,{id:"selectedContactsMenu",anchorEl:m,open:Boolean(m),onClose:t.closeSelectedContactsMenu},i.a.createElement(g.J,null,i.a.createElement(g.I,{onClick:function(){o(c),t.closeSelectedContactsMenu()}},i.a.createElement(g.E,null,i.a.createElement(g.w,null,"delete")),i.a.createElement(g.F,{inset:!0,primary:"Remove"})),i.a.createElement(g.I,{onClick:function(){u(c),t.closeSelectedContactsMenu()}},i.a.createElement(g.E,null,i.a.createElement(g.w,null,"star")),i.a.createElement(g.F,{inset:!0,primary:"Starred"})),i.a.createElement(g.I,{onClick:function(){s(c),t.closeSelectedContactsMenu()}},i.a.createElement(g.E,null,i.a.createElement(g.w,null,"star_border")),i.a.createElement(g.F,{inset:!0,primary:"Unstarred"})))))},accessor:"thumbnail",Cell:function(t){return i.a.createElement(g.b,{className:"mr-8",alt:t.original.name,src:t.value,style:{borderRadius:0}})},className:"justify-center",width:64,sortable:!1},{Header:"Name",accessor:"name",filterable:!1},{Header:"Created at",accessor:"created_at",filterable:!1,Cell:function(e){return t.dateFormat(e.value)}},{Header:"Tags",accessor:"tags",Cell:function(t){return i.a.createElement(ct.a,{data:t.value,isEdit:!1})},filterable:!1,sortable:!1},{Header:"",width:64,className:"justify-center",Cell:function(t){return i.a.createElement("div",{className:"flex items-center"},i.a.createElement(g.x,{onClick:function(e){e.stopPropagation(),l(t.original.id)}},i.a.createElement(g.w,null,"delete")))}}],defaultPageSize:10,noDataText:"No contacts found"})):i.a.createElement("div",{className:"flex items-center justify-center h-full"},i.a.createElement(g.ab,{color:"textSecondary",variant:"h5"},"There are no contacts!"))}}]),e}(s.Component);var Ot=Object(m.g)(Object(f.b)(function(t){var e=t.floorplansApp;return{contacts:e.contacts.entities,selectedContactIds:e.contacts.selectedContactIds,searchText:e.contacts.searchText,user:e.user}},function(t){return Object(d.c)({getContacts:_,getUserData:T,toggleInSelectedContacts:W,selectAllContacts:q,deSelectAllContacts:z,openEditContactDialog:V,removeContacts:$,toggleStarredContact:tt,toggleStarredContacts:et,setContactsStarred:at,setContactsUnstarred:nt,confirmDialog:J},t)})(Et)),yt=a(16),Tt={id:"",name:"",lastName:"",avatar:"assets/images/avatars/profile.jpg",nickname:"",company:"",jobTitle:"",email:"",phone:"",address:"",birthday:"",notes:""},vt=function(t){function e(){var t,a;Object(n.a)(this,e);for(var c=arguments.length,l=new Array(c),s=0;s<c;s++)l[s]=arguments[s];return(a=Object(r.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(l)))).state=Object(yt.a)({},Tt,{disableEdit:!0}),a.handleChange=function(t){a.setState(h.a.set(Object(yt.a)({},a.state),t.target.name,"checkbox"===t.target.type?t.target.checked:t.target.value))},a.closeComposeDialog=function(){"edit"===a.props.contactDialog.type?a.props.closeEditContactDialog():a.props.closeNewContactDialog()},a.edit=function(){a.setState({disableEdit:!1})},a}return Object(l.a)(e,t),Object(c.a)(e,[{key:"componentDidUpdate",value:function(t,e,a){!t.contactDialog.props.open&&this.props.contactDialog.props.open&&("edit"===this.props.contactDialog.type&&this.props.contactDialog.data&&!h.a.isEqual(this.props.contactDialog.data,e)&&this.setState(Object(yt.a)({},this.props.contactDialog.data,{disableEdit:!0})),"new"!==this.props.contactDialog.type||h.a.isEqual(Tt,e)||this.setState(Object(yt.a)({},Tt)))}},{key:"canBeSubmitted",value:function(){return this.state.name.length>0}},{key:"render",value:function(){var t=this.props,e=t.contactDialog;t.addContact;return i.a.createElement(g.j,Object.assign({classes:{paper:"m-24"}},e.props,{onClose:this.closeComposeDialog,fullWidth:!0,maxWidth:"xs"}),i.a.createElement(g.a,{position:"static",elevation:1},i.a.createElement("div",{className:"flex flex-col items-center justify-center pb-20 pt-16"},"edit"===e.type&&i.a.createElement(g.ab,{variant:"h6",color:"inherit",className:"pt-8"},this.state.name))),i.a.createElement(g.l,{classes:{root:"p-24"}},i.a.createElement("div",{className:"flex"},i.a.createElement(g.X,{disabled:this.state.disableEdit,className:"mb-16",label:"Name",autoFocus:!0,id:"name",name:"name",value:this.state.name,variant:"outlined",required:!0,fullWidth:!0})),i.a.createElement("div",{className:"flex mb-24"},i.a.createElement("fieldset",{style:{border:"1px solid #c4c4c4",borderRadius:4,width:312}},i.a.createElement("legend",{style:{color:"#757575",marginLeft:10,fontSize:12}},"Tags"),i.a.createElement("div",null,i.a.createElement(ct.a,{data:this.state.tags,isEdit:!1})))),i.a.createElement("div",{className:"flex"},i.a.createElement(g.X,{disabled:this.state.disableEdit,className:"mb-24",label:"Created by",id:"created_by",name:"created_by",value:this.state.id,variant:"outlined",fullWidth:!0})),i.a.createElement("div",{className:"flex"},i.a.createElement(g.X,{disabled:this.state.disableEdit,className:"mb-24",label:"Location",id:"address",name:"address",value:"this.state.location",variant:"outlined",fullWidth:!0}))))}}]),e}(s.Component);var At=Object(f.b)(function(t){return{contactDialog:t.floorplansApp.contacts.contactDialog}},function(t){return Object(d.c)({closeEditContactDialog:Y,closeNewContactDialog:X,addContact:K,updateContact:Z},t)})(vt),St=a(24),Dt={entities:[],page:{},totalPage:"",searchText:"",selectedContactIds:[],routeParams:{},contactDialog:{type:"new",props:{open:!1},data:null},confirmDialog:{props:{open:!1},user_id:null}},jt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case A:return Object(yt.a)({},t,{entities:e.payload,routeParams:e.routeParams,page:e.params,totalPage:e.totalPage});case S:return Object(yt.a)({},t,{searchText:e.searchText});case D:var a=e.contactId,n=Object(St.a)(t.selectedContactIds);return n=void 0!==n.find(function(t){return t===a})?n.filter(function(t){return t!==a}):Object(St.a)(n).concat([a]),Object(yt.a)({},t,{selectedContactIds:n});case j:var c=Object.keys(t.entities).map(function(e){return t.entities[e]}).map(function(t){return t.id});return Object(yt.a)({},t,{selectedContactIds:c});case N:return Object(yt.a)({},t,{selectedContactIds:[]});case P:return Object(yt.a)({},t,{contactDialog:{type:"new",props:{open:!0},data:null}});case w:return Object(yt.a)({},t,{contactDialog:{type:"new",props:{open:!1},data:null}});case I:return Object(yt.a)({},t,{contactDialog:{type:"edit",props:{open:!0},data:e.data}});case k:return Object(yt.a)({},t,{contactDialog:{type:"edit",props:{open:!1},data:null}});case U:return Object(yt.a)({},t,{confirmDialog:{props:{open:!0},user_id:e.data}});case H:return Object(yt.a)({},t,{confirmDialog:{props:{open:!1},user_id:null}});default:return t}},Nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return e.payload;default:return t}},Pt=Object(d.d)({contacts:jt,user:Nt}),wt=function(t){function e(){return Object(n.a)(this,e),Object(r.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("item_id");this.props.getContacts(t),this.props.getUserData()}},{key:"componentDidUpdate",value:function(t,e){if(!h.a.isEqual(this.props.location,t.location)){var a=localStorage.getItem("item_id");this.props.getContacts(a)}}},{key:"render",value:function(){var t=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.m,{classes:{contentCardWrapper:"p-16 sm:p-24 pb-80",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},content:i.a.createElement(Ot,null),sidebarInner:!0,onRef:function(e){t.pageLayout=e},innerScroll:!0}),i.a.createElement(At,null),i.a.createElement(bt,{history:this.props.history}))}}]),e}(s.Component);e.default=Object(C.a)("floorplansApp",Pt)(Object(u.withStyles)(function(t){return{addButton:{position:"absolute",right:12,bottom:12,zIndex:99}}},{withTheme:!0})(Object(m.g)(Object(f.b)(function(t){var e=t.floorplansApp;return{contacts:e.contacts.entities,selectedContactIds:e.contacts.selectedContactIds,searchText:e.contacts.searchText,user:e.user}},function(t){return Object(d.c)({getContacts:_,getUserData:T,openNewContactDialog:B},t)})(wt))))}}]);